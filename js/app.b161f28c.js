(function(){"use strict";var e={7188:function(e,t,a){var n=a(9963),o=a(6252),r=a(2262),s=a(566),l=a(2119),u=a(3907);const i={on(e,t){document.addEventListener(e,(e=>t(e.detail)))},dispatch(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove(e,t){document.removeEventListener(e,t)}};var c=a(2482),p=a(9669),d=a.n(p);const m=d().create({baseURL:"http://localhost:8080",headers:{"Content-Type":"application/json"}}),g=e=>{const t=e?.response?.data?.error,a=t[0].toUpperCase()+t.slice(1);return a||"Unknown error"},h=e=>e.then((e=>Promise.resolve(e.data)),(e=>Promise.reject(g(e))));class v{constructor(){(0,c.Z)(this,"PATH","/users")}getMyData(){return h(m.get(`${this.PATH}/me`))}getMyProfileImage(){return h(m.get(`${this.PATH}/images`,{headers:{accept:"image/jpeg"}}))}registerUser(e){return h(m.post(`${this.PATH}/registration`,e))}}var f=new v;class w{constructor(){(0,c.Z)(this,"PATH","/passions")}getAllPassions(){return h(m.get(`${this.PATH}`))}}var y=new w;class b{constructor(){(0,c.Z)(this,"PATH","/locations"),(0,c.Z)(this,"SIZE",20),(0,c.Z)(this,"COUNTRY_NAME","")}getLocationsByCountryName(e){return this.COUNTRY_NAME=e,h(m.get(`${this.PATH}?\n\t\tcountryName=${e}&size=${this.SIZE}`))}getLocationsBySearchString(e){return h(m.get(`${this.PATH}?\n\t\tcountryName=${this.COUNTRY_NAME}&search=${e}&size=${this.SIZE}`))}}var S=new b;class _{constructor(){(0,c.Z)(this,"PATH","/countries"),(0,c.Z)(this,"page",0),(0,c.Z)(this,"SIZE",10),(0,c.Z)(this,"MAX_NUMBER_OF_COUNTRIES",240)}getPaginatedCountries(){return h(m.get(`${this.PATH}?\n\t\tpage=${this.page}&size=${this.SIZE}&sort=name`)).then((e=>(this.page<this.MAX_NUMBER_OF_COUNTRIES/this.SIZE&&++this.page,e)))}getCountriesBySearchString(e){return h(m.get(`${this.PATH}?name=${e}`))}}var k=new _;const E=[{injectKey:"usersService",service:f},{injectKey:"passionsService",service:y},{injectKey:"locationsService",service:S},{injectKey:"countriesService",service:k}];var U={setup(e){const t=(0,u.oR)(),a=(0,l.tv)(),n=()=>{t.dispatch("auth/logout"),a.push({name:"TheLogin"})};(0,o.bv)((()=>i.on("logout",(()=>n())))),(0,o.Jd)((()=>i.remove("logout")));for(const r of E)(0,o.JJ)(r.injectKey,r.service);return(e,t)=>{const a=(0,o.up)("router-view"),n=(0,o.up)("n-dialog-provider"),l=(0,o.up)("n-message-provider"),u=(0,o.up)("n-config-provider");return(0,o.wg)(),(0,o.j4)(u,{theme:(0,r.SU)(s.$)},{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a)])),_:1})])),_:1})])),_:1},8,["theme"])}}};const P=U;var C=P,W=a(6828);const A={class:"container"},T=(0,o.Uk)(" Login Form "),H={class:"container__btns"},N=(0,o.Uk)("Login"),I=(0,o.Uk)("Click to register");var L={setup(e){const t=(0,u.oR)(),a=(0,l.tv)(),n=(0,W.R)(),s=(0,r.iH)({username:"",password:""}),i=()=>{t.dispatch("auth/login",s.value).then((()=>{a.replace({path:"/vue-coursework-shminder/main/profile"})}),(e=>{n.error({title:"Failed to login",content:e})}))},c=()=>{a.push({path:"/vue-coursework-shminder/registration"})};return(e,t)=>{const a=(0,o.up)("n-gradient-text"),n=(0,o.up)("n-image"),r=(0,o.up)("n-space"),l=(0,o.up)("n-input"),u=(0,o.up)("n-form-item"),p=(0,o.up)("n-form"),d=(0,o.up)("n-button"),m=(0,o.up)("n-card");return(0,o.wg)(),(0,o.iD)("div",A,[(0,o.Wm)(m,{class:"container__card"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{vertical:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(a,{style:{display:"block"},size:24,type:"success"},{default:(0,o.w5)((()=>[T])),_:1}),(0,o.Wm)(n,{width:"200",src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"Login photo","preview-disabled":""})])),_:1}),(0,o.Wm)(p,{model:s.value,"label-width":"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{label:"Username"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{autofocus:"",value:s.value.username,"onUpdate:value":t[0]||(t[0]=e=>s.value.username=e),placeholder:"Enter your email"},null,8,["value"])])),_:1}),(0,o.Wm)(u,{label:"Password"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{value:s.value.password,"onUpdate:value":t[1]||(t[1]=e=>s.value.password=e),type:"password",placeholder:"Enter your password"},null,8,["value"])])),_:1})])),_:1},8,["model"]),(0,o._)("div",H,[(0,o.Wm)(d,{onClick:i},{default:(0,o.w5)((()=>[N])),_:1}),(0,o.Wm)(d,{onClick:c},{default:(0,o.w5)((()=>[I])),_:1})])])),_:1})])}}},j=a(3744);const O=(0,j.Z)(L,[["__scopeId","data-v-098f2535"]]);var $=O,Z=a(7964),R={setup(e){const t=["Profile","Statistic"],a=t.map((e=>({label:()=>(0,o.h)(l.rH,{to:{name:e,params:{lang:"en-us"}}},{default:()=>e}),key:e})));a.push({label:()=>(0,o.h)(Z.Z,{onClick:()=>{i.dispatch("logout")}},{default:()=>"Logout"})});const n=(0,r.iH)(a);return(e,t)=>{const a=(0,o.up)("n-menu"),r=(0,o.up)("n-card"),s=(0,o.up)("router-view"),l=(0,o.up)("n-space");return(0,o.wg)(),(0,o.j4)(l,{vertical:"",size:"large"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,{mode:"horizontal",options:n.value},null,8,["options"])])),_:1}),(0,o.Wm)(s)])),_:1})}}};const B=R;var x=B,z=a(3577);function M(e,t,a,n,r,s){const l=(0,o.up)("n-card");return(0,o.wg)(),(0,o.j4)(l,{class:"container",style:(0,z.j5)(s.styleObject),title:a.title??""},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","title"])}var q={name:"TheWrapper",props:{title:String,width:Number},computed:{styleObject(){return{width:`${this.width}%`}}}};const F=(0,j.Z)(q,[["render",M],["__scopeId","data-v-f9116ea2"]]);var D=F,Y={setup(e){return(e,t)=>{const a=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)((0,r.SU)(D),{title:"Profile",width:50},{default:(0,o.w5)((()=>[(0,o.Wm)(a)])),_:1})}}};const K=Y;var G=K;const X=(e="",t="",a="")=>`${e} ${t} ${a}`,J=e=>(new Date).getFullYear()-new Date(e).getFullYear(),V=(0,o._)("br",null,null,-1),Q=(0,o._)("br",null,null,-1),ee=(0,o.Uk)(" About: "),te=(0,o._)("br",null,null,-1),ae=(0,o.Uk)(" Age: "),ne=(0,o._)("br",null,null,-1),oe=(0,o.Uk)(" Gender: "),re=(0,o._)("br",null,null,-1);var se={setup(e){const t=(0,u.oR)(),a=(0,W.R)(),n=(0,o.f3)("usersService"),s=((0,r.iH)(t.state.auth.user),(0,r.iH)(null)),l=(0,r.iH)(""),i=(0,r.iH)([]),c=(0,r.iH)(null),p=(0,r.iH)(null);(0,o.bv)((()=>d()));const d=()=>{n.getMyData().then((e=>{s.value=e,console.log(s.value),l.value=X(s.value.firstName,s.value.lastName,s.value.middleName),i.value=s.value.passions,c.value=s.value.location}),(e=>{a.error({title:"Failed to load items",content:e})})),n.getMyProfileImage().then((e=>{p.value=e}))},m=()=>{};return(e,t)=>{const a=(0,o.up)("n-image"),n=(0,o.up)("n-text"),u=(0,o.up)("n-space"),p=(0,o.up)("n-thing"),d=(0,o.up)("n-list-item"),g=(0,o.up)("n-list");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(a,{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",onClick:m}),s.value?((0,o.wg)(),(0,o.j4)(g,{key:0,bordered:""},{header:(0,o.w5)((()=>[(0,o.Uk)(" Full name: "+(0,z.zw)(l.value)+" ",1),V,(0,o.Uk)(" Email: "+(0,z.zw)(s.value.email)+" ",1),Q,(0,o.Uk)(" Phone: "+(0,z.zw)(s.value.phone),1)])),footer:(0,o.w5)((()=>[ee,(0,o._)("span",null,(0,z.zw)(s.value.about),1),te,ae,(0,o._)("span",null,(0,z.zw)((0,r.SU)(J)(s.value.dateOfBirth)),1),ne,oe,(0,o._)("span",null,(0,z.zw)(s.value.gender),1),re])),default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[c.value?((0,o.wg)(),(0,o.j4)(p,{key:0,title:"Location"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,z.zw)(c.value.city),1)])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{title:"Passions"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.value,(e=>((0,o.wg)(),(0,o.iD)("p",null,(0,z.zw)(e.name),1)))),256))])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0)],64)}}};const le=se;var ue=le,ie=a(3359);a(1703);const ce=(e,t="input")=>({required:!0,trigger:["blur","input"],message:`Please, ${t} your ${e}`}),pe=()=>[{required:!0,validator(e,t){const a=new Date(t).getFullYear(),n=(new Date).getFullYear();return t?!(n-a<18)||new Error("Your age must be equal or more than 18!"):new Error("Date of birth is required!")},trigger:["blur","input"]}],de=()=>[{required:!0,validator(e,t){return!!t||new Error("Location is required!")},trigger:["blur","input"]}],me=()=>[{required:!0,validator(e,t){return t?!(Number(t)<18)||new Error("Age should be above 18"):new Error("Age is required!")},trigger:["blur","input"]}],ge=()=>[{required:!0,validator(e,t){return t?!!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)||new Error("Incorrect email, try it again!"):new Error("Email is required!")},trigger:["blur","input"]}],he=()=>[{required:!0,validator(e,t){return t?!!/(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(t)||new Error("Password must contain 8 symbols, 1 upper case and 1 digit"):new Error("Email is required!")},trigger:["blur","input"]}],ve=()=>[{required:!0,validator(e,t){return t?!!/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(t)||new Error("Incorrect phone, try it again!"):new Error("Phone is required!")},trigger:["blur","input"]}],fe=()=>[{required:!0,validator(e,t){return!!t.length||new Error("At least one passion is required!")},trigger:["blur","input"]}],we=e=>((0,o.dD)("data-v-0dc03390"),e=e(),(0,o.Cn)(),e),ye={class:"container"},be=we((()=>(0,o._)("h1",null,"Registration Form",-1))),Se=(0,o.Uk)(" Male "),_e=(0,o.Uk)(" Female "),ke=(0,o.Uk)(" Attack helicopter "),Ee={style:{display:"flex","justify-content":"center","align-items":"center"}},Ue=(0,o.Uk)(" Register "),Pe=(0,o.Uk)(" Go back ");var Ce={setup(e){const t=(0,ie.U)(),a=(0,l.tv)(),n=(0,W.R)(),s=(0,o.f3)("locationsService"),u=(0,o.f3)("passionsService"),i=(0,o.f3)("countriesService"),c=(0,o.f3)("usersService"),p=(0,r.iH)("large"),d=(0,r.iH)(null),m=(0,r.iH)([]),g=(0,r.iH)([]),h=(0,r.iH)([]),v=(0,r.iH)({firstName:"Artem",middleName:"Kolesnikov",lastName:"Sergeevich",dateOfBirth:"2004-01-01",email:"frontend@mail.ru",password:"Aaaaaaa1",phone:"9023433935",gender:null,country:null,passionsIds:[],locationId:null,about:"Something about me to have the mock data"});(0,o.bv)((()=>f()));const f=()=>{Promise.allSettled([w(),y()])},w=()=>{u.getAllPassions().then((e=>{e.forEach((e=>{h.value.push({label:e.name,value:e.id})}))}))},y=()=>{i.getPaginatedCountries().then((e=>{e.forEach((e=>{g.value.push({label:e.name,value:e.name})}))}))},b=e=>{s.getLocationsByCountryName(e).then((e=>{P(e)}))},S=e=>{const t=e.currentTarget;t.scrollTop+t.offsetHeight>=t.scrollHeight&&y()},_=e=>{i.getCountriesBySearchString(e).then((e=>{g.value=e.map((e=>({label:e.name,value:e.name})))}))},k=e=>{b(e)},E=e=>{s.getLocationsBySearchString(e).then((e=>{P(e)}))},U=e=>{e.preventDefault(),d.value?.validate((e=>{e?(console.log(e),t.error("Fill all the required spots!")):c.registerUser(v.value).then((e=>{t.success("Valid"),a.replace({path:"/vue-coursework-shminder/login"})})).catch((e=>{n.error({title:"Failed to register",content:e})}))}))},P=e=>{m.value=e.map((e=>({label:e.city,value:e.id})))},C={firstName:ce("first name"),lastName:ce("last name"),age:me(),email:ge(),gender:ce("gender","select"),password:he(),phone:ve(),country:ce("country","select"),locationId:de(),passionsIds:fe(),dateOfBirth:pe()};return(e,t)=>{const n=(0,o.up)("n-input"),s=(0,o.up)("n-form-item-gi"),l=(0,o.up)("n-date-picker"),u=(0,o.up)("n-radio"),i=(0,o.up)("n-space"),c=(0,o.up)("n-radio-group"),f=(0,o.up)("n-select"),w=(0,o.up)("n-checkbox"),y=(0,o.up)("n-checkbox-group"),b=(0,o.up)("n-grid"),P=(0,o.up)("n-button"),W=(0,o.up)("n-form"),A=(0,o.up)("n-card");return(0,o.wg)(),(0,o.iD)("div",ye,[(0,o.Wm)(A,{class:"container__card"},{default:(0,o.w5)((()=>[be,(0,o.Wm)(W,{ref_key:"formRef",ref:d,model:v.value,rules:C,size:p.value,"label-placement":"top",class:"container__form"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{span:16,"x-gap":20,cols:16},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{span:8,label:"First name",path:"firstName"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{autofocus:"",value:v.value.firstName,"onUpdate:value":t[0]||(t[0]=e=>v.value.firstName=e),placeholder:"Enter your first name"},null,8,["value"])])),_:1}),(0,o.Wm)(s,{span:8,label:"Last name",path:"lastName"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{value:v.value.lastName,"onUpdate:value":t[1]||(t[1]=e=>v.value.lastName=e),placeholder:"Enter your last name"},null,8,["value"])])),_:1}),(0,o.Wm)(s,{span:8,label:"Middle name",path:"middleName"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{value:v.value.middleName,"onUpdate:value":t[2]||(t[2]=e=>v.value.middleName=e),placeholder:"Enter your middle name"},null,8,["value"])])),_:1}),(0,o.Wm)(s,{span:8,label:"Date of birth",path:"dateOfBirth"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{"formatted-value":v.value.dateOfBirth,"onUpdate:formatted-value":t[3]||(t[3]=e=>v.value.dateOfBirth=e),type:"date","value-format":"yyyy-MM-dd","default-formatted-value":"2004-01-01"},null,8,["formatted-value"])])),_:1}),(0,o.Wm)(s,{span:8,label:"Email",path:"email"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{value:v.value.email,"onUpdate:value":t[4]||(t[4]=e=>v.value.email=e),type:"email",placeholder:"Enter your email"},null,8,["value"])])),_:1}),(0,o.Wm)(s,{span:8,label:"Gender",path:"gender"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{value:v.value.gender,"onUpdate:value":t[5]||(t[5]=e=>v.value.gender=e),name:"gender-radio-group"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{value:"MALE"},{default:(0,o.w5)((()=>[Se])),_:1}),(0,o.Wm)(u,{value:"FEMALE"},{default:(0,o.w5)((()=>[_e])),_:1}),(0,o.Wm)(u,{value:"ATTACKHELICOPTER"},{default:(0,o.w5)((()=>[ke])),_:1})])),_:1})])),_:1},8,["value"])])),_:1}),(0,o.Wm)(s,{span:8,label:"Password",path:"password"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{value:v.value.password,"onUpdate:value":t[6]||(t[6]=e=>v.value.password=e),type:"password",placeholder:"Enter your password"},null,8,["value"])])),_:1}),(0,o.Wm)(s,{span:8,label:"Phone",path:"phone"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{value:v.value.phone,"onUpdate:value":t[7]||(t[7]=e=>v.value.phone=e),type:"tel",placeholder:"Enter your phone"},null,8,["value"])])),_:1}),(0,o.Wm)(s,{span:8,label:"Select your country",path:"country"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{value:v.value.country,"onUpdate:value":[t[8]||(t[8]=e=>v.value.country=e),k],placeholder:"Country",filterable:"","reset-menu-on-options-change":!1,options:g.value,onScroll:S,onSearch:_},null,8,["value","options"])])),_:1}),(0,o.Wm)(s,{span:8,label:"Select your country location",path:"locationId"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{value:v.value.locationId,"onUpdate:value":t[9]||(t[9]=e=>v.value.locationId=e),placeholder:"Location",filterable:"","reset-menu-on-options-change":!1,options:m.value,onSearch:E},null,8,["value","options"])])),_:1}),(0,o.Wm)(s,{span:20,label:"Passions",path:"passionsIds"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{value:v.value.passionsIds,"onUpdate:value":t[10]||(t[10]=e=>v.value.passionsIds=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{"item-style":"display: flex;"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(h.value,(e=>((0,o.wg)(),(0,o.j4)(w,{value:e.value,label:e.label},null,8,["value","label"])))),256))])),_:1})])),_:1},8,["value"])])),_:1}),(0,o.Wm)(s,{span:16,label:"Tell us about yourself",path:"about"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{placeholder:"Something about you",value:v.value.about,"onUpdate:value":t[11]||(t[11]=e=>v.value.about=e),type:"textarea",autosize:{minRows:1,maxRows:3}},null,8,["value"])])),_:1})])),_:1}),(0,o._)("div",Ee,[(0,o.Wm)(P,{round:"",type:"primary",onClick:U},{default:(0,o.w5)((()=>[Ue])),_:1}),(0,o.Wm)(P,{round:"",type:"primary",style:{"margin-left":"25px"},onClick:t[12]||(t[12]=e=>{(0,r.SU)(a).go(-1)})},{default:(0,o.w5)((()=>[Pe])),_:1})])])),_:1},8,["model","size"])])),_:1})])}}};const We=(0,j.Z)(Ce,[["__scopeId","data-v-0dc03390"]]);var Ae=We,Te=a(8115),He=a(4039),Ne=a(4444),Ie=a(6212);class Le{constructor(){(0,c.Z)(this,"PATH","/statistics"),(0,c.Z)(this,"PAGE_SIZE",11),(0,c.Z)(this,"page",0),(0,c.Z)(this,"checkResponseLength",(e=>(e.length&&++this.page,e)))}getStatisticByCountries(){return h(m.get(`${this.PATH}/countries\n\t\t?page=${this.page}&size=${this.PAGE_SIZE}&sort=totalLocationsCount%2Cdesc`)).then(this.checkResponseLength)}getStatisticByCountryPassions(){return h(m.get(`${this.PATH}/countries/passions/all\n\t\t?page=${this.page}&size=${this.PAGE_SIZE}`)).then(this.checkResponseLength)}getStatisticByLocations(){return h(m.get(`${this.PATH}/locations\n\t\t?page=${this.page}&size=${this.PAGE_SIZE}&sort=totalUsersCount%2Cdesc`)).then(this.checkResponseLength)}getStatisticByPassions(){return h(m.get(`${this.PATH}/passions\n\t\t?page=${this.page}&size=${this.PAGE_SIZE}&sort=totalUsersCount%2Cdesc`)).then(this.checkResponseLength)}getStatisticByMaxPassions(){return h(m.get(`${this.PATH}/countries/passions/max\n\t\t?page=${this.page}&size=${this.PAGE_SIZE}`)).then(this.checkResponseLength)}}var je=Le;const Oe=e=>{const t=new je,a=(0,r.iH)([]),n=(0,r.iH)(10),o=(0,r.iH)(1),s=(0,r.iH)(e),l=(0,r.qj)({page:o,pageSize:n,onChange:e=>{l.page=e},onUpdatePageSize:e=>{l.pageSize=e,l.page=1}}),u=()=>{t.getStatisticByCountries().then((e=>{e.forEach(((e,t)=>{a.value.push({key:t,name:e.name,totalLocationsCount:e.totalLocationsCount})}))}))},i=()=>{t.getStatisticByCountryPassions().then((e=>{e.forEach(((e,t)=>{a.value.push({key:t,country:e.countryName,passion:e.passionName,usersCount:e.usersCount})}))}))},c=()=>{t.getStatisticByLocations().then((e=>{e.forEach(((e,t)=>{a.value.push({key:t,city:e.city,totalUsersCount:e.totalUsersCount})}))}))},p=()=>{t.getStatisticByPassions().then((e=>{e.forEach(((e,t)=>{a.value.push({key:t,name:e.name,totalUsersCount:e.totalUsersCount})}))}))},d=()=>{t.getStatisticByMaxPassions().then((e=>{e.forEach(((e,t)=>{a.value.push({key:t,countryName:e.countryName,passionName:e.passionName,totalUsersCount:e.usersCount})}))}))};return{columns:s,pagination:l,returnableRef:a,loadStatisticByCountries:u,loadStatisticByPassionsInCountry:i,loadStatisticByLocations:c,loadStatisticByPassions:p,loadStatisticByMaxPassions:d,page:o}};var $e={setup(e){const t=[{title:"Country",key:"name"},{title:"Total locations count",key:"totalLocationsCount"}],{loadStatisticByCountries:a,columns:n,pagination:s,page:l,returnableRef:u}=Oe(t);return(0,o.bv)((()=>a())),(0,o.YP)((()=>l.value),(()=>{a()})),(e,t)=>{const a=(0,o.up)("n-data-table");return(0,o.wg)(),(0,o.j4)(a,{columns:(0,r.SU)(n),data:(0,r.SU)(u),pagination:(0,r.SU)(s)},null,8,["columns","data","pagination"])}}};const Ze=$e;var Re=Ze,Be={setup(e){const t=[{title:"City",key:"city"},{title:"Users count",key:"totalUsersCount"}],{loadStatisticByLocations:a,columns:n,pagination:s,page:l,returnableRef:u}=Oe(t);return(0,o.bv)((()=>a())),(0,o.YP)((()=>l.value),(()=>{a()})),(e,t)=>{const a=(0,o.up)("n-data-table");return(0,o.wg)(),(0,o.j4)(a,{columns:(0,r.SU)(n),data:(0,r.SU)(u),pagination:(0,r.SU)(s)},null,8,["columns","data","pagination"])}}};const xe=Be;var ze=xe,Me={setup(e){const t=[{title:"Country name",key:"countryName"},{title:"Passion name",key:"passionName"},{title:"Total users count",key:"totalUsersCount"}],{loadStatisticByMaxPassions:a,columns:n,pagination:s,page:l,returnableRef:u}=Oe(t);return(0,o.bv)((()=>a())),(0,o.YP)((()=>l.value),(()=>{a()})),(e,t)=>{const a=(0,o.up)("n-data-table");return(0,o.wg)(),(0,o.j4)(a,{columns:(0,r.SU)(n),data:(0,r.SU)(u),pagination:(0,r.SU)(s)},null,8,["columns","data","pagination"])}}};const qe=Me;var Fe=qe,De={setup(e){const t=[{title:"Country name",key:"country"},{title:"Passion",key:"passion"},{title:"Users ",key:"usersCount"}],{loadStatisticByPassionsInCountry:a,columns:n,pagination:s,page:l,returnableRef:u}=Oe(t);return(0,o.bv)((()=>a())),(0,o.YP)((()=>l.value),(()=>{a()})),(e,t)=>{const a=(0,o.up)("n-data-table");return(0,o.wg)(),(0,o.j4)(a,{columns:(0,r.SU)(n),data:(0,r.SU)(u),pagination:(0,r.SU)(s)},null,8,["columns","data","pagination"])}}};const Ye=De;var Ke=Ye,Ge={setup(e){const t=[{title:"Passion",key:"name"},{title:"Total users count",key:"totalUsersCount"}],{loadStatisticByPassions:a,columns:n,pagination:s,page:l,returnableRef:u}=Oe(t);return(0,o.bv)((()=>a())),(0,o.YP)((()=>l.value),(()=>{a()})),(e,t)=>{const a=(0,o.up)("n-data-table");return(0,o.wg)(),(0,o.j4)(a,{columns:(0,r.SU)(n),data:(0,r.SU)(u),pagination:(0,r.SU)(s)},null,8,["columns","data","pagination"])}}};const Xe=Ge;var Je=Xe,Ve={emits:["selectTab"],setup(e,{emit:t}){const a=e=>()=>(0,o.h)(Te.g,null,{default:()=>(0,o.h)(e)}),n=(0,r.iH)(null),s=(0,r.iH)(!1),l=e=>t("selectTab",e),u=[{label:"Countries",key:(0,r.Xl)(Re),icon:a(He.Z)},{label:"Passions",key:(0,r.Xl)(Je),icon:a(Ne.Z)},{label:"Passions by country",key:(0,r.Xl)(Ke),icon:a(Ne.Z)},{label:"Max passions by countries",key:(0,r.Xl)(Fe),icon:a(Ne.Z)},{label:"Locations",key:(0,r.Xl)(ze),icon:a(Ie.Z)}];return(e,t)=>{const a=(0,o.up)("n-menu"),r=(0,o.up)("n-layout-sider"),i=(0,o.up)("n-layout");return(0,o.wg)(),(0,o.j4)(i,{"has-sider":""},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{bordered:"","collapse-mode":"width","collapsed-width":64,width:240,collapsed:s.value,"show-trigger":"",onCollapse:t[2]||(t[2]=e=>s.value=!0),onExpand:t[3]||(t[3]=e=>s.value=!1)},{default:(0,o.w5)((()=>[(0,o.Wm)(a,{value:n.value,"onUpdate:value":[t[0]||(t[0]=e=>n.value=e),t[1]||(t[1]=e=>l(n.value))],collapsed:s.value,"collapsed-width":64,"collapsed-icon-size":36,"icon-size":24,options:u},null,8,["value","collapsed"])])),_:1},8,["collapsed"]),(0,o.WI)(e.$slots,"default")])),_:3})}}};const Qe=Ve;var et=Qe,tt={setup(e){const t=(0,r.iH)(null),a=e=>t.value=e;return(e,n)=>((0,o.wg)(),(0,o.j4)((0,r.SU)(et),{onSelectTab:a},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)(o.Ob,null,[((0,o.wg)(),(0,o.j4)((0,o.LL)(t.value)))],1024))])),_:1}))}};const at=tt;var nt=at,ot={setup(e){return(e,t)=>{const a=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)((0,r.SU)(D),{title:"Statistic",width:80},{default:(0,o.w5)((()=>[(0,o.Wm)(a)])),_:1})}}};const rt=ot;var st=rt;const lt=[{path:"/",redirect:{name:"TheLogin"}},{name:"TheLogin",path:"/vue-coursework-shminder/login",component:$},{name:"TheRegistrationPage",path:"/vue-coursework-shminder/registration",component:Ae},{name:"TheMain",path:"/vue-coursework-shminder/main",component:x,children:[{path:"Profile",component:G,children:[{name:"Profile",path:"",component:ue}]},{path:"statistic",component:st,children:[{name:"Statistic",path:"",component:nt}]}]}],ut=(0,l.p7)({history:(0,l.PO)(),routes:lt});ut.beforeEach(((e,t,a)=>{const n=["/vue-coursework-shminder/login","/vue-coursework-shminder/registration"],o=!n.includes(e.path),r=localStorage.getItem("user");o&&!r?a("/vue-coursework-shminder/login"):a()}));var it=ut;class ct{constructor(){(0,c.Z)(this,"ACCESS_TOKEN","access_token")}getLocalAccessToken(){return localStorage.getItem(this.ACCESS_TOKEN)}updateLocalAccessToken(e){localStorage.setItem(this.ACCESS_TOKEN,e)}getUser(){return JSON.parse(localStorage.getItem("user"))}setUser(e){localStorage.setItem("user",JSON.stringify(e))}}var pt=new ct;class dt{constructor(){(0,c.Z)(this,"AUTH_TOKEN_HEADER","x-auth-token")}login(e){return m.post("/security/login",e).then((e=>(pt.setUser(e.data),pt.updateLocalAccessToken(e.headers[this.AUTH_TOKEN_HEADER]),Promise.resolve(e.data))))}logout(){return m.post("/security/logout").then((()=>{localStorage.removeItem("user"),pt.updateLocalAccessToken(null)}),(e=>{console.log(e)}))}register(e){return m.post("/users/registration",e).then((e=>(pt.setUser(e.data),pt.updateLocalAccessToken(e.headers[this.AUTH_TOKEN_HEADER]),Promise.resolve(e.data))))}}var mt=new dt;const gt=JSON.parse(localStorage.getItem("user")),ht=gt?{status:{loggedIn:!0},user:gt}:{status:{loggedIn:!1},user:null},vt={namespaced:!0,state:ht,actions:{login({commit:e},t){return mt.login(t).then((t=>(e("loginSuccess",t),Promise.resolve(t))),(t=>(e("loginFailure"),Promise.reject(g(t)))))},logout({commit:e}){mt.logout().then((()=>{e("logout")}))},register({commit:e},t){return mt.register(t).then((t=>(e("registerSuccess",t),Promise.resolve(t))),(t=>(e("registerFailure"),Promise.reject(g(t)))))}},mutations:{loginSuccess(e,t){e.status.loggedIn=!0,e.user=t},loginFailure(e){e.status.loggedIn=!1,e.user=null},logout(e){e.status.loggedIn=!1,e.user=null},registerSuccess(e,t){e.user=t},registerFailure(e){e.status.loggedIn=!1,e.user=null}}},ft=(0,u.MT)({modules:{auth:vt}});var wt=ft,yt=a(8855),bt=a(2346);const St=()=>{m.interceptors.request.use((e=>{const t=["/security/login"];if(!t.includes(e.url)){const t=pt.getLocalAccessToken();t&&(e.headers["x-auth-token"]=t)}return e})),m.interceptors.response.use((e=>e),(e=>(401===e?.response?.status&&it.replace({path:"/vue-coursework-shminder/login"}),Promise.reject(e))))};var _t=St;_t();const kt=(0,n.ri)(C);kt.use(bt.Z,d()),kt.use(wt),kt.use(it),kt.use(yt.Z),kt.provide("axios",kt.config.globalProperties.axios),kt.mount("#app")}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n](r,r.exports,a),r.loaded=!0,r.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,n,o,r){if(!n){var s=1/0;for(c=0;c<e.length;c++){n=e[c][0],o=e[c][1],r=e[c][2];for(var l=!0,u=0;u<n.length;u++)(!1&r||s>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[u])}))?n.splice(u--,1):(l=!1,r<s&&(s=r));if(l){e.splice(c--,1);var i=o();void 0!==i&&(t=i)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,o,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,s=n[0],l=n[1],u=n[2],i=0;if(s.some((function(t){return 0!==e[t]}))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(u)var c=u(a)}for(t&&t(n);i<s.length;i++)r=s[i],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=self["webpackChunkvue_coursework_shminder"]=self["webpackChunkvue_coursework_shminder"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(7188)}));n=a.O(n)})();
//# sourceMappingURL=app.b161f28c.js.map